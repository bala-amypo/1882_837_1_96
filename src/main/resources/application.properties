spring.application.name=demo

# Use Port 9001 as required by your environment
server.port=9001

# --- DATABASE CONFIGURATION (H2 In-Memory) ---
# Using H2 ensures tests pass without needing an external MySQL server
spring.datasource.url=jdbc:h2:mem:transport;DB_CLOSE_DELAY=-1;MODE=MySQL
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# Tables setup: Auto-update schema based on Entities
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false

# --- H2 CONSOLE ---
# Allows you to see the database at http://localhost:9001/h2-console
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=true

# --- FIXES FOR STARTUP & SECURITY ---
# Crucial for Spring Boot 3.x with Security/JWT to prevent "Circular Dependency" crashes
spring.main.allow-circular-references=true

# for https / proxy environments
server.forward-headers-strategy=framework